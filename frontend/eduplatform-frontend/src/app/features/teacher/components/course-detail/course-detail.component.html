<div class="course-detail-container">
  <!-- Header Premium -->
  <header class="header">
    <div class="header-content">
      <!-- Back Navigation -->
      <button class="back-btn" (click)="goBack()" aria-label="Volver al Dashboard">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        <span>Volver al Dashboard</span>
      </button>

      <!-- Course Header Info -->
      <div class="course-header" *ngIf="course">
        <div class="course-header-main">
          <div class="course-title-section">
            <h1 class="course-title">{{ course.title }}</h1>
            <p class="course-description">{{ course.description }}</p>
          </div>

          <div class="course-meta-badges">
            <div class="meta-badge level">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                <polyline points="2 17 12 22 22 17"></polyline>
                <polyline points="2 12 12 17 22 12"></polyline>
              </svg>
              <span>Nivel {{ course.level }}</span>
            </div>
            <div class="meta-badge students">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              <span>{{ course.studentCount || 0 }} Estudiantes</span>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="header-actions">
          <button class="action-btn secondary" (click)="manageStudents()" aria-label="Gestionar Estudiantes">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            <span>Gestionar Estudiantes</span>
          </button>

          <button class="action-btn primary challenge" (click)="openChallengeModal()" aria-label="Crear Reto">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
              <path d="M4 22h16"></path>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
            <span>Crear Reto</span>
          </button>

          <button class="action-btn primary exercise" (click)="openExerciseModal()" aria-label="Crear Ejercicio">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            <span>Crear Ejercicio</span>
          </button>
        </div>
      </div>

      <!-- Tab Navigation -->
      <nav class="tabs-navigation" role="tablist">
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'exercises'"
          (click)="setActiveTab('exercises')"
          role="tab"
          [attr.aria-selected]="activeTab === 'exercises'"
          aria-label="Ver Ejercicios">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
          </svg>
          <span class="tab-label">Ejercicios</span>
          <span class="tab-count">{{ exercises.length }}</span>
        </button>

        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'challenges'"
          (click)="setActiveTab('challenges')"
          role="tab"
          [attr.aria-selected]="activeTab === 'challenges'"
          aria-label="Ver Retos">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
            <path d="M4 22h16"></path>
            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
          </svg>
          <span class="tab-label">Retos</span>
          <span class="tab-count">{{ challenges.length }}</span>
        </button>

        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'podium'"
          (click)="setActiveTab('podium')"
          role="tab"
          [attr.aria-selected]="activeTab === 'podium'"
          aria-label="Ver Podio">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="8" r="7"></circle>
            <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
          </svg>
          <span class="tab-label">Podio</span>
        </button>
      </nav>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="main-content">
    <!-- Motivational Banner -->
    <div class="motivational-banner">
      <div class="banner-icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
        </svg>
      </div>
      <p class="banner-text">
        ¡Los errores son solo oportunidades para aprender! Cada bug que resuelves te acerca más a dominar el desarrollo de videojuegos.
      </p>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state" role="status" aria-live="polite">
      <div class="spinner-container">
        <div class="spinner"></div>
        <div class="spinner-glow"></div>
      </div>
      <p class="loading-text">Cargando contenido...</p>
    </div>

    <!-- Tab Content: Exercises -->
    <div *ngIf="!isLoading && activeTab === 'exercises'" class="tab-content" role="tabpanel">
      <!-- Empty State - Exercises -->
      <div *ngIf="exercises.length === 0" class="empty-state">
        <div class="empty-icon-wrapper">
          <div class="empty-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
          </div>
        </div>
        <h3 class="empty-title">No hay ejercicios todavía</h3>
        <p class="empty-description">Comienza creando el primer ejercicio para tus estudiantes</p>
        <button class="empty-action-btn" (click)="openExerciseModal()" aria-label="Crear Primer Ejercicio">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          <span>Crear Primer Ejercicio</span>
        </button>
      </div>

      <!-- Exercises Grid -->
      <div *ngIf="exercises.length > 0" class="content-grid">
        <article *ngFor="let exercise of exercises" class="content-card exercise-card">
          <!-- Card Header -->
          <div class="card-header">
            <div class="card-header-left">
              <h3 class="card-title">{{ exercise.title }}</h3>
              <div class="card-badges">
                <span 
                  class="badge difficulty-badge" 
                  [style.background]="getDifficultyColor(exercise.difficulty)"
                  [attr.aria-label]="'Dificultad: ' + exercise.difficulty">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <circle cx="12" cy="12" r="10"></circle>
                  </svg>
                  {{ exercise.difficulty }}
                </span>
              </div>
            </div>
            <div class="card-actions">
              <button 
                class="icon-btn edit-btn" 
                (click)="editExercise(exercise)"
                [attr.aria-label]="'Editar ejercicio ' + exercise.title"
                title="Editar">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
              </button>
              <button 
                class="icon-btn delete-btn" 
                (click)="deleteExercise(exercise)"
                [attr.aria-label]="'Eliminar ejercicio ' + exercise.title"
                title="Eliminar">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                  <line x1="10" y1="11" x2="10" y2="17"></line>
                  <line x1="14" y1="11" x2="14" y2="17"></line>
                </svg>
              </button>
            </div>
          </div>

          <!-- Card Body -->
          <div class="card-body">
            <p class="card-description">{{ exercise.description }}</p>

            <div class="card-meta-info">
              <div class="meta-info-item" *ngIf="exercise.deadline">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <span>{{ exercise.deadline | date : "short" }}</span>
              </div>
              <div class="meta-info-item" *ngIf="exercise.hasFile">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                  <polyline points="13 2 13 9 20 9"></polyline>
                </svg>
                <span>Archivo adjunto</span>
              </div>
              <div class="meta-info-item" *ngIf="exercise.hasExternalUrl">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
                <span>Enlace externo</span>
              </div>
            </div>
          </div>

          <!-- Card Footer -->
          <div class="card-footer">
            <button class="footer-btn hint-btn" (click)="manageHints(exercise)" aria-label="Ver Pistas">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
              </svg>
              <span>Ver Pistas</span>
            </button>
            <button 
              *ngIf="exercise.hasFile"
              class="footer-btn download-btn" 
              (click)="downloadExercise(exercise)"
              aria-label="Descargar archivo">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              <span>Descargar</span>
            </button>
            <button 
              *ngIf="exercise.hasExternalUrl"
              class="footer-btn link-btn" 
              (click)="openExternalUrl(exercise.externalUrl!)"
              aria-label="Abrir enlace externo">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                <polyline points="15 3 21 3 21 9"></polyline>
                <line x1="10" y1="14" x2="21" y2="3"></line>
              </svg>
              <span>Abrir Enlace</span>
            </button>
            <button 
              class="footer-btn primary-btn" 
              (click)="viewChallengeSubmissions(challenge)"
              aria-label="Ver soluciones">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              <span>Ver Soluciones</span>
            </button>
          </div>
        </article>
      </div>
    </div>

    <!-- Tab Content: Podium -->
    <div *ngIf="!isLoading && activeTab === 'podium'" class="tab-content" role="tabpanel">
      <app-podium [courseId]="courseId"></app-podium>
    </div>
  </main>
</div>

<!-- ========== MODALES ========== -->

<!-- Modal Crear/Editar Ejercicio -->
<app-exercise-modal
  *ngIf="showExerciseModal"
  [courseId]="courseId"
  [editingExercise]="editingExercise"
  (closeModal)="closeExerciseModal()"
  (exerciseCreated)="handleExerciseCreated($event)">
</app-exercise-modal>

<!-- Modal Gestionar Pistas -->
<app-hint-modal
  *ngIf="showHintModal && selectedExercise"
  [exerciseId]="selectedExercise.id!"
  [exerciseTitle]="selectedExercise.title"
  (closeModal)="closeHintModal()">
</app-hint-modal>

<!-- Modal Gestionar Estudiantes -->
<app-manage-students-modal
  *ngIf="showStudentsModal"
  [courseId]="courseId"
  [courseTitle]="course?.title || ''"
  (closeModal)="closeStudentsModal()">
</app-manage-students-modal>

<!-- Modal Confirmación Eliminar Ejercicio -->
<app-confirmation-modal
  *ngIf="showDeleteConfirmModal && exerciseToDelete"
  title="¿Eliminar ejercicio?"
  [message]="getDeleteMessage()"
  confirmText="Eliminar"
  cancelText="Cancelar"
  type="danger"
  (confirm)="confirmDeleteExercise()"
  (cancel)="cancelDeleteExercise()">
</app-confirmation-modal>

<!-- Modal Ver Entregas de Ejercicio -->
<app-submissions-modal
  *ngIf="showSubmissionsModal && selectedExercise"
  [exerciseId]="selectedExercise.id!"
  [exerciseTitle]="selectedExercise.title"
  (closeModal)="closeSubmissionsModal()">
</app-submissions-modal>

<!-- Modal Crear/Editar Reto -->
<app-challenge-modal
  *ngIf="showChallengeModal"
  [courseId]="courseId"
  [editingChallenge]="editingChallenge"
  (closeModal)="closeChallengeModal()"
  (challengeCreated)="handleChallengeCreated($event)">
</app-challenge-modal>

<!-- Modal Confirmación Eliminar Reto -->
<app-confirmation-modal
  *ngIf="showDeleteChallengeModal && challengeToDelete"
  title="¿Eliminar reto?"
  [message]="getDeleteChallengeMessage()"
  confirmText="Eliminar"
  cancelText="Cancelar"
  type="danger"
  (confirm)="confirmDeleteChallenge()"
  (cancel)="cancelDeleteChallenge()">
</app-confirmation-modal>

<!-- Modal Ver Soluciones de Reto -->
<app-challenge-submissions-list-modal
  *ngIf="showChallengeSubmissionsModal && selectedChallenge"
  [challengeId]="selectedChallenge.id!"
  [challengeTitle]="selectedChallenge.title"
  [maxBonusPoints]="selectedChallenge.maxBonusPoints"
  (closeModal)="closeChallengeSubmissionsModal()">
</app-challenge-submissions-list-modala2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                <polyline points="15 3 21 3 21 9"></polyline>
                <line x1="10" y1="14" x2="21" y2="3"></line>
              </svg>
              <span>Abrir Enlace</span>
            </button>
            <button 
              class="footer-btn primary-btn" 
              (click)="viewSubmissions(exercise)"
              aria-label="Ver entregas">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              <span>Ver Entregas</span>
            </button>
          </div>
        </article>
      </div>
    </div>

    <!-- Tab Content: Challenges -->
    <div *ngIf="!isLoading && activeTab === 'challenges'" class="tab-content" role="tabpanel">
      <!-- Empty State - Challenges -->
      <div *ngIf="challenges.length === 0" class="empty-state">
        <div class="empty-icon-wrapper">
          <div class="empty-icon challenge-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
              <path d="M4 22h16"></path>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
          </div>
        </div>
        <h3 class="empty-title">No hay retos todavía</h3>
        <p class="empty-description">Crea el primer reto para motivar a tus estudiantes</p>
        <button class="empty-action-btn challenge-action" (click)="openChallengeModal()" aria-label="Crear Primer Reto">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
            <path d="M4 22h16"></path>
          </svg>
          <span>Crear Primer Reto</span>
        </button>
      </div>

      <!-- Challenges Grid -->
      <div *ngIf="challenges.length > 0" class="content-grid">
        <article *ngFor="let challenge of challenges" class="content-card challenge-card">
          <!-- Card Header -->
          <div class="card-header">
            <div class="card-header-left">
              <h3 class="card-title">{{ challenge.title }}</h3>
              <div class="card-badges">
                <span 
                  class="badge difficulty-badge" 
                  [style.background]="getDifficultyColor(challenge.difficulty)"
                  [attr.aria-label]="'Dificultad: ' + challenge.difficulty">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M4 22h16"></path>
                  </svg>
                  {{ challenge.difficulty }}
                </span>
                <span class="badge xp-badge" [attr.aria-label]="'Bonificación: ' + challenge.maxBonusPoints + ' XP'">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                  </svg>
                  +{{ challenge.maxBonusPoints }} XP
                </span>
              </div>
            </div>
            <div class="card-actions">
              <button 
                class="icon-btn edit-btn" 
                (click)="editChallenge(challenge)"
                [attr.aria-label]="'Editar reto ' + challenge.title"
                title="Editar">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
              </button>
              <button 
                class="icon-btn delete-btn" 
                (click)="deleteChallenge(challenge)"
                [attr.aria-label]="'Eliminar reto ' + challenge.title"
                title="Eliminar">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
              </button>
            </div>
          </div>

          <!-- Card Body -->
          <div class="card-body">
            <p class="card-description">{{ challenge.description }}</p>

            <div class="card-meta-info">
              <div class="meta-info-item" *ngIf="challenge.deadline">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <span>{{ challenge.deadline | date : "short" }}</span>
              </div>
              <div class="meta-info-item" *ngIf="challenge.hasFile">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                  <polyline points="13 2 13 9 20 9"></polyline>
                </svg>
                <span>Archivo adjunto</span>
              </div>
              <div class="meta-info-item" *ngIf="challenge.hasExternalUrl">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
                <span>Enlace externo</span>
              </div>
            </div>
          </div>

          <!-- Card Footer -->
          <div class="card-footer">
            <button 
              *ngIf="challenge.hasFile"
              class="footer-btn download-btn" 
              (click)="downloadChallenge(challenge)"
              aria-label="Descargar archivo">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              <span>Descargar</span>
            </button>
            <button 
              *ngIf="challenge.hasExternalUrl"
              class="footer-btn link-btn" 
              (click)="openExternalUrl(challenge.externalUrl!)"
              aria-label="Abrir enlace externo">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 13v6